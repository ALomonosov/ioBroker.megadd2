{
  "name": "iobroker.megadd",
  "version": "0.1.3",
  "description": "Lets control the MegaD-2561 over ethernet (http://www.ab-log.ru/smart-house/ethernet/megad-2561) from ioBroker",
  "author": {
    "name": "ausHaus",
    "email": "teshaus@gmail.com"
  },
  "homepage": "https://github.com/ausHaus/ioBroker.megadd",
  "keywords": [
    "ioBroker",
    "MegaD-2561"
  ],
  "repository": {
    "type": "git",
    "url": "git+https://github.com/ausHaus/ioBroker.megadd.git"
  },
  "dependencies": {},
  "devDependencies": {
    "grunt": "^1.0.1",
    "grunt-replace": "^1.0.1",
    "grunt-contrib-jshint": "^1.0.0",
    "grunt-jscs": "^2.8.0",
    "grunt-http": "^2.0.1",
    "mocha": "^2.4.5",
    "chai": "^3.5.0",
    "keypress": "*"
  },
  "bugs": {
    "url": "https://github.com/ausHaus/ioBroker.megadd/issues"
  },
  "main": "main.js",
  "scripts": {
    "test": "node node_modules/mocha/bin/mocha"
  },
  "license": "MIT",
  "readme": "![Logo](admin/megad.png)\nioBroker MegaD-2561 adapter\n=================\n\n[![NPM version](http://img.shields.io/npm/v/iobroker.megadd.svg)](https://www.npmjs.com/package/iobroker.megadd)\n[![Downloads](https://img.shields.io/npm/dm/iobroker.megadd.svg)](https://www.npmjs.com/package/iobroker.megadd)\n[![Tests](https://travis-ci.org/ioBroker/ioBroker.megadd.svg?branch=master)](https://travis-ci.org/ioBroker/ioBroker.megadd)\n\n[![NPM](https://nodei.co/npm/iobroker.megadd.png?downloads=true)](https://nodei.co/npm/iobroker.megadd/)\n\nLets control the [MegaD-2561](http://www.ab-log.ru/smart-house/ethernet/megad-2561) over ethernet.\n## English \n[по русски](#Русский)\n\n## Install\n\n```node iobroker.js add megad```\n\n### Information\nThe device has 14 ports, 0-7 inputs and 8-13 outputs.\nTo read the state of the port call\n```http://mega_ip/sec/?pt=4&cmd=get``` , where sec is password (max 3 chars), 4 is port number\nThe result will come as \"ON\", \"OFF\" or analog value for analog ports\n\nTo set the state call:\n```http://mega_ip/sec/?cmd=2:1``` , where sec is password (max 3 chars), 2 is port number, and 1 is the value\nFor digital ports only 0, 1 and 2 (toggle) are allowed, for analog ports the values from 0 to 255 are allowed\n\nThe device can report the changes of ports to some web server in form\n```http://ioBroker:80/?pt=6```  , where 6 is the port number\n\nMegaD-328 cannot report on other port than 80.\n\n### Configuration\n\n- IP: IP address of MegaD-328;\n- MegaD-328 Name: Name of the MegaD-328 to assign the port changes, e.g. \"DevA\". If no name set the adapter instance will be used for that;\n- Port: Listening port on ioBroker. MegaD-328 cannot send to ports other than 80. Default value: 80. \n- Poll interval: poll interval in seconds. All configured input ports will be polled in defined interval;\n- Password: password to access the device (max 3 characters). Default value \"sec\";\n\nMegaD-328 can report about changes on some ports if configured. \nYou can configure something like that \"http://ioBrokerIP/instance\" on MegaD-328 in \"Net\"-Field and MegaD-328 will send reports like this one \"http://ioBrokerIP/instance/?pt=7\" to ioBroker. \nThat means the button on port 7 was pressed. ioBroker expects instance number (e.g. \"0\") or defined name of MegaD-328 (e.g. \"DevA\"). The \"Net\" field will look like: \"http://192.168.0.8/0/\".\n\n### Ports\nAll ports, that are desired to be used must be configured in right order. Following settings must be set for every port:\n\n- Name: name of the port. Used by ioBroker;\n- Input: Is the port INPUT(true) or output(false);\n- Switch: Is the port can be ON or OFF (in this case value = TRUE) or just used to send the reports about button press (FALSE);\n- Digital: Analog or digital port. ioBroker expects analog ports with range from 0 to 255.\n- Offset: offset for the **analog** port.\n- Factor:  multiply factor for **anaolog** port.\n- Long press: detect long press on digital port (port have to be SWITCH type)\n- Double click ms: interval for detection of double click\n\nFor input:\n```\nioBrokerValue = MegaValue * factor + offset;\n```\n\nFor output: \n```\nMegaValue = (ioBrokerValue - offset) / factor;\n```\n\nTo get the range of the analog value from 100 to 500 set the factor as 400 and offset = 100.\n\n**The order of the ports is very important. The port in first row will be associated with P0 in MegaD-328. In row number 14 with P13.**\n\n-------------------\n## Русский        \nПодробную документацию можно найти здесь: [http://www.ab-log.ru/smart-house/ethernet/MegaD-328](http://www.ab-log.ru/smart-house/ethernet/MegaD-328)\n    \n### Настройки\n\n- IP Адрес устройства: IP адрес MegaD-328;\n- MegaD Имя: Имя MegaD-328 устройства для идентификации сообщений о смене состояния порта от MegaD-328, например \"DevA\". Если имя не задано, то для этих целей будет использоватся номер инстанции драйвера.;\n- ioBroker веб-порт: Порт на котором ioBroker разворачивает веб сервер для приёма сообщений от MegaD-328. MegaD-328 не поддерживает на данный момент порты отличные от 80. Значение по умолчанию: 80. \n- Интервал опроса (сек): инетрвал опроса портов в секундах;\n- MegaD-328 Пароль: пароль для доступа на MegaD-328 (максимально 3 символа). Значение по умолчанию: \"sec\";\n- Интервал для длинного нажатия (мс): если отжатие после нажатия кнопки произошло позже указанного интервала, то сгенерируется длинное нажатие;\n- Интервал двойного нажатия (мс): если между нажатиями пройдет меньше указанного времени, то сгенерируется двойное нажатие;\n\nВ сетевых настройках MegaD-328 можно сконфигуририровать IP-адрес ioBroker. При каждом нажатии на кнопку MegaD-328 сообщает ioBroker (restAPI) номер сработавшего входа. \n\nВыглядит запрос примерно следующим образом:\n´´´http://192.168.0.250/0/?pt=7´´´\n\n### Порты\nНеобходимо сконфигурироваь все порты, которые должны быть видимы в ioBorker. Для каждого порта необходимо настроить следующее:\n\n- Имя: имя порта. Исползуется в ioBroker для создание объектов;\n- Вход: является ли порт входом (true) или выходом(false);\n- Переключатель: Может ли порт быть в положениях ВКЛ и ВЫКЛ (в этом случае значение TRUE) или он просто используется для сигнализирования нажатия на кнопку (FALSE);\n- Цифровой: Цифровой или аналоговый порт. ioBroker ожидает значени с аналогового порта в промежутке от 0 до 255.\n- Множитель:  множитель для значения **аналогового** порта.\n- Сдвиг: сдвиг для значения **аналогового** порта.\n- Длинное нажатие: если активировано, то порт будет генерировать событие \"длинное нажатие\" в объекте port_long (Порт должен быть цифровым и иметь тип \"Переключатель\")\n- Двойное нажатие: если активировано, то порт будет генерировать событие \"double click\" в объекте port_double\n\nДля выхода:\n\n```\nMegaЗначение = (ioBrokerЗначение - Сдвиг) / Множитель;\n```\n\nДля входа:\n\n```\nioBrokerЗначение = MegaЗначение * Множитель + Сдвиг;\n```\n\nНапример, что бы получить интервал значений от 100 до 500 нужно установить сдиг 100 и множитель 400.\n\nТолько аналоговые порты принимают во внимание Множитель и Сдвиг.\n\n**Порядок портов очень важен. Порт в первой колонке таблицы ассоциируется с портом P0 на MegaD-328. Порт в колонке 14 с P13.**          \n         \n          \n## Changelog\n### 1.2.1 (2016-08-14)\n* (bluefox) extend digital temperature sensor with new type\n\n### 1.2.0 (2016-05-03)\n* (bluefox) add info.connection state\n* (bluefox) fix error if more ports in megad than configured\n\n### 1.1.0 (2015-12-22)\n* (bluefox) make counters writeable\n\n### 1.1.0 (2015-12-17)\n* (bluefox) add counter for digital inputs\n* (bluefox) fix the internal temperature sensor monitor\n\n### 1.0.6 (2015-11-13)\n* (bluefox) fix short press\n\n### 1.0.5 (2015-11-11)\n* (bluefox) fix small errors\n\n### 1.0.4 (2015-11-10)\n* (bluefox) fix errors after optimization\n\n### 1.0.3 (2015-11-06)\n* (bluefox) if 1wire sensor not connected, NA value will be received \n\n### 1.0.2 (2015-11-04)\n* (bluefox) fix using of more than one megad\n\n### 1.0.1 (2015-10-03)\n* (bluefox) support of iButton\n\n### 1.0.0 (2015-10-03)\n* (bluefox) Fix small error with 1-Wire and threshold mode\n\n### 0.2.14 (2015-09-30)\n* (bluefox) fix discover function\n\n### 0.2.13 (2015-09-29)\n* (bluefox) add link to admin (only with admin version >= 0.5.14)\n* (bluefox) use misc flag \n* (bluefox) enable pwm only for ports 10,12,13\n* (bluefox) disable action for DHT11/22\n\n### 0.2.12 (2015-09-29)\n* (bluefox) fix discover function\n* (bluefox) generate true and false for simple clicks\n\n### 0.2.11 (2015-09-28)\n* (bluefox) disable discover button if adapter disabled\n* (bluefox) fix discover function\n* (bluefox) write for inputs misc=1 and add de-bounce parameter\n\n### 0.2.10 (2015-09-26)\n* (bluefox) return \"OK\" and not \"OK->\" to other than 0 instances\n\n### 0.2.9 (2015-09-20)\n* (bluefox) change server script from \"/0/\" to \"0/\"\n\n### 0.2.8 (2015-09-19)\n* (bluefox) fix PWM output\n\n### 0.2.6 (2015-09-18)\n* (bluefox) tuning on settings for ports: Ports 14 and 15 are always ADC. Threshold are shown only for 1-wire if digital sensor.\n\n### 0.2.5 (2015-09-17)\n* (bluefox) fix settings for digital sensors\n\n### 0.2.4 (2015-09-11)\n* (bluefox) fix read of analog inputs (0-1023)\n\n### 0.2.3 (2015-09-09)\n* (bluefox) fix read of PWM values\n\n### 0.2.2 (2015-09-07)\n* (bluefox) fix write outputs\n* (bluefox) implement discover function\n\n### 0.2.1 (2015-08-27)\n* (bluefox) works only with latest firmware. \n            For Digital Sensor the meaning of attribute m was changed from \"sensor type\" to \"threshold detection\"\n            Sensor type is \"d\"\n* (bluefox) support of digital sensors 1W and iB            \n\n### 0.2.0 (2015-08-19)\n* (bluefox) completely rewrite adapter\n\n### 0.1.2 (2015-06-29)\n* (bluefox) add tests\n\n### 0.1.1 (2015-05-24)\n* (bluefox) add 14,15 ports\n* (bluefox) add settings for port 3\n\n### 0.1.0 (2015-05-22)\n* (bluefox) fix error if no configuration for ports\n\n### 0.0.3 (2015-03-14)\n* (bluefox) double click&long click\n* (bluefox) fix error with read all ports together\n\n### 0.0.2 (2015-03-14)\n* (bluefox) read status off all ports together\n\n### 0.0.1 (2015-03-05)\n* (bluefox) make socket usable as module\n",
  "readmeFilename": "README.md",
  "_id": "iobroker.megadd@0.1.3",
  "_shasum": "bd98a26285201c7913cf4f66d93c266f0b0f3ff2",
  "_resolved": "https://github.com/ausHaus/ioBroker.megadd/tarball/master",
  "_from": "https://github.com/ausHaus/ioBroker.megadd/tarball/master"
}
